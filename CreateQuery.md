USE defaultdatabase;
CREATE TABLE Site
(
  SiteID SERIAL NOT NULL,
  SiteType VARCHAR(50) NOT NULL,
  City VARCHAR(5) NOT NULL,
  Country VARCHAR(5) NOT NULL,
  Continent VARCHAR(5) NOT NULL,
  SafetyRating INT,
  SafetyComment VARCHAR(500),
  TravelRequirementComments VARCHAR(500),
  DescriptionField VARCHAR(500) NOT NULL,
  PRIMARY KEY (SiteID)
);

CREATE TABLE Event
(
  EventID SERIAL NOT NULL,
  EventDescription VARCHAR(500) NOT NULL,
  SiteID BIGINT UNSIGNED NOT NULL UNIQUE,
  PRIMARY KEY (EventID),
  FOREIGN KEY (SiteID) REFERENCES Site(SiteID)
);

CREATE TABLE User
(
  UserName VARCHAR(50) NOT NULL,
  UserType ENUM (“Admin”, “User”, “Anonymous”),
  PasswordHash VARCHAR(100) NOT NULL,
  UserID SERIAL NOT NULL,
  PRIMARY KEY (UserID),
  UNIQUE (UserName)
);

CREATE TABLE Saved
(
  SiteID BIGINT UNSIGNED NOT NULL UNIQUE,
  UserID BIGINT UNSIGNED NOT NULL UNIQUE,
  PRIMARY KEY (SiteID, UserID),
  FOREIGN KEY (SiteID) REFERENCES Site(SiteID),
  FOREIGN KEY (UserID) REFERENCES User(UserID)
);


CREATE TABLE Review
(
  ReviewID INT NOT NULL,
  Review TEXT NOT NULL,
  SiteID BIGINT UNSIGNED NOT NULL UNIQUE,
  UserID BIGINT UNSIGNED NOT NULL UNIQUE,
  PRIMARY KEY (ReviewID),
  FOREIGN KEY (SiteID) REFERENCES Site(SiteID),
  FOREIGN KEY (UserID) REFERENCES User(UserID)
);

